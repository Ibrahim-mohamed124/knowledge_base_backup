<!--
title: Stateful application storage operations
description: 
published: true
date: 2025-11-11T17:55:22.430Z
tags: 
editor: ckeditor
dateCreated: 2025-11-11T17:16:59.056Z
-->

<h1><strong>Stateful application storage operations</strong></h1>
<ul>
  <li>portwox is able to clone applications configuration and data between namespaces in the same cluster or different clusters</li>
</ul>
<blockquote>
  <p>All application storage operations require the <mark class="marker-yellow">administrator-level cluster privileges</mark> if you operate between namespaces</p>
</blockquote>
<ul>
  <li>Main API resources:<ol>
      <li>backupLocation</li>
      <li>applicationBackup</li>
    </ol>
  </li>
</ul>
<h2>backupLocation</h2>
<ul>
  <li>portworx supports &nbsp;these object storage providers:<ol>
      <li>S3 compatible storage</li>
      <li>Azure blobs</li>
      <li>GCC storage</li>
    </ol>
  </li>
  <li>For S3 storage this data is required:</li>
</ul>
<pre><code class="language-plaintext">"endpoint" : "bucketEndpoint.com"
"key": "ABCDEF1234567890"
"secret": "ABCDEF1234567890ABCDEF1234567890ABCDEF1234567890"</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>To restore backups to a different cluster, a backupLocation resource must be created on the new cluster that matches the backupLocation CRD on your original cluster.</p>
</blockquote>
<ul>
  <li>There are two methods to provide the required data to connect to a S3 bucket:<ol>
      <li>plaintext in the backupLocation resource</li>
      <li>as a secret</li>
    </ol>
  </li>
</ul>
<h4><strong>Plaintext credentials</strong></h4>
<pre><code class="language-plaintext">apiVersion: stork.libopenstorage.org/v1alpha1
kind: BackupLocation
metadata:
  name: mysql
  namespace: mysql-app
  annotations:
    stork.libopenstorage.org/skipresource: "true"
location:
  type: s3
  path: "bucket-name"
  sync: true
  s3Config:
    region: us-east-1
    accessKeyID: XXXX
    secretAccessKey: XXXX
    endpoint: "https://bucketEndpoint.com"
    disableSSL: false</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>name:</strong> the backupLocation object's name</li>
  <li><strong>namespace:</strong> the<mark class="marker-yellow"> namespace the backupLocation exists in</mark></li>
  <li><strong>location:</strong>
    <ul>
      <li><strong>type:</strong> the <mark class="marker-yellow">object store type</mark></li>
      <li><strong>path:</strong> <mark class="marker-yellow">the bucket Portworx will use for the backup</mark></li>
      <li><strong>sync:</strong> If you're<mark class="marker-yellow"> restoring to a new cluster</mark>, set <code>sync</code> to true to allow your new cluster to retrieve the previous backups from your backup location.</li>
      <li><strong>s3Config:</strong>
        <ul>
          <li><strong>region:</strong> which region your s3 bucket is located in</li>
          <li><strong>accessKeyID:</strong> your bucket's accessKeyID</li>
          <li><strong>secretAccessKey:</strong> your bucket's secretAccessKey</li>
          <li><strong>endpoint:</strong> the URL or IP address of your bucket</li>
          <li><strong>disableSSL:</strong> whether or not to disable SSL</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<blockquote>
  <p>If you use URL as your bucket endpoint, you must include the http prefix: either <code>https://</code> or <code>http://</code>, depending on whether or not you're using SSL.</p>
</blockquote>
<h4><strong>Kubernetes secret containing your credentials</strong></h4>
<pre><code class="language-plaintext">  apiVersion: v1
  kind: Secret
  metadata:
    name: s3secret
    namespace: mysql
    annotations:
      stork.libopenstorage.org/skipresource: "true" &gt; Annotate the Kubernetes secret so that other 
      components like Stork and PX-Backup do not backup this resource.
  stringData:
    region: us-east-1
    accessKeyID: &lt;access-key&gt;
    secretAccessKey: &lt;secret-key&gt;
    endpoint: "X.X.X.141:9010"
    disableSSL: "false"
    encryptionKey: "testKey"</code></pre>
<ul>
  <li><strong>name:</strong> the Secret object's name</li>
  <li><strong>namespace:</strong> the <mark class="marker-yellow">namespace the Secret exists in</mark></li>
  <li><strong>stringData:</strong>
    <ul>
      <li><strong>region:</strong> which region your s3 bucket is located in</li>
      <li><strong>accessKeyID:</strong> your bucket's accessKeyID</li>
      <li><strong>secretAccessKey:</strong> your bucket's secretAccessKey</li>
      <li><strong>endpoint:</strong> the URL or IP address of your bucket</li>
      <li><strong>disableSSL:</strong> whether or not to disable SSL</li>
      <li><strong>encryptionKey:</strong> your secret's encryption key</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">apiVersion: stork.libopenstorage.org/v1alpha1
kind: BackupLocation
metadata:
  name: mysql-backup
  namespace: mysql
  annotations:
    stork.libopenstorage.org/skipresource: "true"
location:
  type: s3
  path: "bucket-name"
  secretConfig: s3secret
  sync: true</code></pre>
<ul>
  <li><strong>name:</strong> the backupLocation object's name</li>
  <li><strong>namespace:</strong> the namespace the backupLocation exists in</li>
  <li><strong>location:</strong>
    <ul>
      <li><strong>type:</strong> the object store type</li>
      <li><strong>path:</strong> the bucket Portworx will use for the backup</li>
      <li><strong>secretConfig:</strong> the <mark class="marker-yellow">Secret object containing your bucket's credentials</mark></li>
      <li><strong>sync:</strong> If you're restoring to a new cluster, set <code>sync</code> to true to allow your new cluster to retrieve the previous backups from your backup location.</li>
    </ul>
  </li>
</ul>
<p>&nbsp;</p>
