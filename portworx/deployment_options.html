<!--
title: Deployment_Options
description: 
published: true
date: 2025-11-11T17:15:45.833Z
tags: ocp, portworx, storage, day 2
editor: ckeditor
dateCreated: 2025-11-11T15:58:12.172Z
-->

<h1>Portworx Deployment Architectures</h1>
<ol>
  <li>Single datacenter<ol>
      <li>Dedicated portworx storage cluster</li>
      <li>Hyperconverged portworx storage cluster</li>
    </ol>
  </li>
  <li>Multi-site HA and DR<ol>
      <li><mark class="marker-yellow">Synchronous DR</mark> over a MAN(metropolitan area network) using multiple Kubernetes clusters with a <mark class="marker-yellow">single Portworx stretch cluster</mark></li>
      <li><mark class="marker-yellow">Asynchronous DR</mark> over a WAN using multiple Kubernetes clusters with <mark class="marker-yellow">multiple Portworx clusters</mark></li>
      <li>Multi-site data center stretch cluster for HA</li>
    </ol>
  </li>
</ol>
<h2><strong>Single data center/multiple AZ Portworx deployment options</strong></h2>
<h3><strong>Dedicated Portworx storage cluster</strong></h3>
<ul>
  <li>Suitable for deployments with fault domains</li>
</ul>
<blockquote>
  <p>A fault domain is a logical grouping of hardware that shares a common point of failure, such as a single power source or network switch. By distributing resources across multiple fault domains, systems can tolerate a single component or a localized failure (like a server rack) without a complete loss of service.&nbsp;</p>
</blockquote>
<ul>
  <li>Portworx volumes will be automatically placed across these fault domains to create fault tolerance.</li>
  <li>Benefits:<ol>
      <li>Easier scaling of compute nodes without having to scale storage with compute resources</li>
      <li>Separation of storage and compute</li>
    </ol>
  </li>
  <li>Constrains:<ol>
      <li>Latency between compute nodes to the storage nodes will affect applications</li>
    </ol>
  </li>
</ul>
<figure class="image"><img src="/deployment-architectures-dedicated-portworx-storage-cluster-48c7f75f5e461c9b12cd92d93a9555aa.png"></figure>
<p>&nbsp;</p>
<h3><strong>Hyperconverged Portworx storage cluster</strong></h3>
<ul>
  <li>Suitable for deployments with fault domains</li>
  <li>Benefits:<ol>
      <li>High performance applicatons</li>
    </ol>
  </li>
  <li>constraints:<ol>
      <li>Harder to scale the cluster nodes because scaling the cluster means adding more storage</li>
      <li>Harder to reduce the computing power do to possible data loss</li>
    </ol>
  </li>
</ul>
<figure class="image"><img src="/deployment-architectures-hyperconverged-portworx-storage-cluster-4a2137667ae6b801e68cc742fbe64ac7.png"></figure>
<p>&nbsp;</p>
<h2><strong>DR and multi-data center HA architectures</strong></h2>
<h3><strong>Synchronous DR over a MAN using multiple Kubernetes clusters with a single Portworx stretch cluster</strong></h3>
<ul>
  <li>Benefits:<ol>
      <li>Namespace and resources &nbsp;granularity &nbsp;levels &nbsp;for &nbsp;DR</li>
      <li><mark class="marker-yellow">RPO zero data protection</mark> and<mark class="marker-yellow"> low RTO in the case of losing an entire data center.</mark></li>
    </ol>
  </li>
</ul>
<blockquote>
  <p>RTO (<a href="https://www.google.com/search?sca_esv=c019091b52478373&amp;rlz=1C1MMCH_enEG1173EG1173&amp;q=Recovery+Time+Objective&amp;sa=X&amp;sqi=2&amp;ved=2ahUKEwjZ3_3ywuqQAxX-VkEAHSJDJI0QxccNegQIDxAB&amp;mstk=AUtExfAUGI83HuWa7BJgS0HVSvz6VQxmuF_Cx1D-aNV5i6rID0XwXhwuJaMNxsmMmSbb5lGs8vN_fDt4bbXq263Q1XLHcRC8SyvKO6bgGHkaH6SRyUyTom1uIqnkNc96TD8fC22HvKVz8m5cvdeopHD-YAIUT6mtwNBf_-T8jhU3b34nT-_2dca-UyHYbmKPt9KAZbiU&amp;csui=3">Recovery Time Objective</a>) and RPO (<a href="https://www.google.com/search?sca_esv=c019091b52478373&amp;rlz=1C1MMCH_enEG1173EG1173&amp;q=Recovery+Point+Objective&amp;sa=X&amp;sqi=2&amp;ved=2ahUKEwjZ3_3ywuqQAxX-VkEAHSJDJI0QxccNegQIDxAC&amp;mstk=AUtExfAUGI83HuWa7BJgS0HVSvz6VQxmuF_Cx1D-aNV5i6rID0XwXhwuJaMNxsmMmSbb5lGs8vN_fDt4bbXq263Q1XLHcRC8SyvKO6bgGHkaH6SRyUyTom1uIqnkNc96TD8fC22HvKVz8m5cvdeopHD-YAIUT6mtwNBf_-T8jhU3b34nT-_2dca-UyHYbmKPt9KAZbiU&amp;csui=3">Recovery Point Objective</a>) are both metrics used in disaster recovery that measure different goals. RTO is the maximum tolerable downtime after a disaster, while RPO is the maximum amount of data loss that is acceptable</p>
</blockquote>
<p>&nbsp; &nbsp; 3.<mark class="marker-yellow"> Data and Kubernetes objects</mark> are replicated across both sites, simplifying and speeding up application failover</p>
<ul>
  <li>constraints:<ol>
      <li>Round trip latency between data centers must be<strong> &lt; 10 ms.</strong></li>
    </ol>
  </li>
</ul>
<figure class="image"><img src="/deployment-architectures-synchronous-disaster-recovery-over-man-mulitple-k8s-clusters-9ae9179cb1eabc1f91f01fff8ebce375.png"></figure>
<p>&nbsp;</p>
<h3><strong>Asynchronous DR over a WAN using multiple Kubernetes clusters with multiple Portworx clusters</strong></h3>
<ul>
  <li>Benefits:<ol>
      <li>Namespace and resources &nbsp;granularity &nbsp;levels &nbsp;for &nbsp;DR</li>
      <li>RPO levels are as low as <mark class="marker-yellow">15 minutes</mark> and RTO under <mark class="marker-yellow">one minute</mark> in the case of losing an entire data center.</li>
    </ol>
  </li>
  <li>Constrains:<ol>
      <li><mark class="marker-yellow">S3-compatible object store </mark>is available to move data.</li>
    </ol>
  </li>
</ul>
<figure class="image"><img src="/deployment-architectures-asynch-dr-over-wan-multiple-k8s-clusters-multiple-portworx-clusters-ed84f8484bea292a88f597d0c1e81838.png"></figure>
<p>&nbsp;</p>
<figure class="table">
  <table style="background-color:rgb(27, 27, 29);">
    <thead>
      <tr>
        <th style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Application and infrastructure requirements</th>
        <th style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Synchronous PX-DR</th>
        <th style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Asynchronous PD-DR</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Number of Portworx clusters</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">1</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">2</td>
      </tr>
      <tr>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Needs an S3-compatible object store to move data</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">No</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Yes</td>
      </tr>
      <tr>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Max round trip latency between data centers</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">10 ms</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">No limit</td>
      </tr>
      <tr>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Data guaranteed to be available at both sites (zero RPO)</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Yes</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">No</td>
      </tr>
      <tr>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Kubernetes objects replicated between data centers</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Yes</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Yes</td>
      </tr>
      <tr>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;">Low RTO</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Yes</td>
        <td style="background-color:hsl(0, 0%, 100%);border-bottom:0.8px solid rgb(96, 103, 112);border-left:0.8px solid rgb(96, 103, 112);border-right:0.8px solid rgb(96, 103, 112);border-top:0.8px solid rgb(96, 103, 112);padding:12px;text-align:center;">Yes</td>
      </tr>
    </tbody>
  </table>
</figure>
<h3><strong>Multi-site data center stretch cluster for HA</strong></h3>
<ul>
  <li>Benefits:<ol>
      <li>High availability of data services across multiple data centers.</li>
      <li>Zero RPO data protection.</li>
    </ol>
  </li>
  <li>constraints:<ol>
      <li>Requires <mark class="marker-yellow">three data centers.</mark></li>
      <li>Max round trip latency between data centers of<mark class="marker-yellow"> under 10 ms.</mark></li>
    </ol>
  </li>
</ul>
<figure class="image"><img src="/deployment-architectures-multi-site-dc-stretch-cluster-for-ha-6bdb93494a88a7512bb618d3e75711b8.png"></figure>
<p>&nbsp;</p>
<blockquote>
  <p>Portworx provides a Kubernetes group snapshot rules engine that allows operators to automatically execute the<mark class="marker-yellow"> pre- and post- snapshot commands</mark> required for each particular data service.</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<figure class="image image_resized" style="width:100%;"><img src="/deployment-architectures-backing-up-data-and-application-configuration-for-k8s-apps-5ed5199fa80aa100c996a1eb28e27d03.png"></figure>
<p>&nbsp;</p>
<h3>Useful commands</h3>
<ul>
  <li>To list cluster nodes of portworx</li>
</ul>
<pre><code class="language-plaintext">kubectl get storagenodes -n &lt;px_namespace&gt;</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
