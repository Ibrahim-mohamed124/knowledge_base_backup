<!--
title: Chapter 1.  Authentication and Identity Management
description: 
published: true
date: 2025-11-05T11:04:36.454Z
tags: 
editor: ckeditor
dateCreated: 2025-11-05T10:36:26.618Z
-->

<h1>Chapter&nbsp;1.&nbsp; Authentication and Identity Management</h1>
<ul>
  <li>Authentication could be via <mark class="marker-yellow">certificates or tokens</mark></li>
  <li>Kubernetes considers to be authenticated any user that presents<mark class="marker-yellow"> a valid certificate that is signed by a trusted certificate authority (CA).</mark> Kubernetes reads the <code>subject</code> field from the certificate, and assigns the username and the groups with the <code>common name</code> (CN) and the <code>organization</code> (O) fields, respectively.</li>
  <li>If the request does not present an access token or certificate, then Kubernetes assigns to the request the <code>system:anonymous</code> system user and the <code>system:unauthenticated</code> system group.</li>
  <li>Kubernetes uses RBAC policies to determine whether the anonymous user has appropriate access to perform the requested action.</li>
</ul>
<h2>Authentication in OpenShift</h2>
<ul>
  <li>OpenShift includes its own built-in OAuth server</li>
</ul>
<h3>Authentication Methods</h3>
<ul>
  <li>The OpenShift OAuth server handles user authentication, and it issues OAuth tokens that grant access to specific resources.</li>
</ul>
<ol>
  <li><strong>X.509 client certificates</strong></li>
  <li><strong>OAuth access tokens</strong>
    <ul>
      <li>OpenShift preconfigures Kubernetes to trust tokens that its own internal OAuth server issues.&nbsp;</li>
    </ul>
  </li>
</ol>
<h4>The OpenShift OAuth Server</h4>
<ul>
  <li>At OCP instillation the authentication operator is installed, which managed the lifecycle of the OAuth server</li>
  <li>The <mark class="marker-yellow">OpenShift OAuth server provides various identity providers (IdPs) that enable integration with identity management systems</mark> such as OpenID Connect and LDAP servers.</li>
</ul>
<figure class="image image_resized" style="width:100%;"><img src="/auth-firstlogin.svg"></figure>
<ul>
  <li>OpenShift web console stores the token in the browser memory instead of in a <code>kubeconfig</code> file</li>
  <li>The<mark class="marker-yellow"> two endpoints for login, which are the API server and the OAuth server,</mark> are the reason why you must accept two server certificates the first time that you log in to the OpenShift web console.</li>
  <li>OAuth user access tokens can be retrieved &nbsp;from the OpenShift OAuth server by using the <code><i>namespace_route</i>/oauth/authorize</code> and <code><i>namespace_route</i>/oauth/token</code> endpoints.</li>
</ul>
<h4>Configure the OpenShift OAuth Server</h4>
<ul>
  <li>After the user successfully logs in to the cluster, the OAuth server creates the<mark class="marker-yellow"> OAuth access token for the user</mark>, and <mark class="marker-yellow">OpenShift creates the identity and user resources.</mark></li>
</ul>
<pre><code class="language-plaintext">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders: 1
  - name: htpasswd-idp-name 2
    mappingMethod: claim 3
    type: HTPasswd
    htpasswd:
      fileData:
        name: htpasswd-secret 4
  - name: ldap-idp-name
    mappingMethod: claim
    type: LDAP
    ldap:
...output omitted...</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
